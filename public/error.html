
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExceptionHandler | Error Control Software</title>
    <style>

        @import url(/assets/css/firacode/fira_code.css);

        body {
            font-family: "Roboto", arial, sans-serif;
        }

        code {

            font-family: 'Fira Code', monospace;
        }

        #errorTable {
            margin: 40px auto 0;
            display: table;
            width: 1000px;
            min-width: 1000px;
            min-height: 600px;
            border-collapse: collapse;
        }

        td, th {
            padding: 0.4em;
            border: #ddd 1px solid;
        }

        .col1 {
            font-weight: 700;
            width: 16%;
            text-align: right;
        }

        .col2 {
            width: 84%;
            text-align: left;
        }

        .head {
            height: 40px;
            font-size: 24px;
            background-color: #d23d24;
            color: white;
        }

        .footer {
            height: 40px;
            font-size: 24px;
            background-color: #365D95;
            color: white;
            margin: unset;
        }

        .top {
            vertical-align: top;
        }

        a {
            text-decoration: none;
            color: white;
        }

        .row-1 {
            height: 30px;
            font-size: 18px;
        }

        .container-track {
            font-family: 'Fira Code', monospace;
            font-size: 12px;
            min-height: 30px;
            height: 150px;
            max-height: 150px;
            overflow-x: auto;
            overflow-y: auto;
        }

        .container-code {
            min-height: 30px;
            height: 275px;
            max-height: 275px;
        }

        code {
            display: block;
            height: 100%;
            font-size: 12px;
            overflow-x: auto;
            overflow-y: auto;
        }

    </style>
</head>

<body>
<div style="display: flex; align-items: center; height: 100%">
    <table id="errorTable">
        <tr>
            <th colspan="2" class="head">ExceptionHandler</th>
        </tr>
        <tr class="row-1">
            <td class="col1">Description:</td>
            <td class="col2">Getter method 'getMailDkimSign' does not exist.</td>
        </tr>
        <tr class="row-1">
            <td class="col1">File:</td>
            <td class="col2">/var/www/html/lh-2.dock/Asset/Framework/Core/ConfigLoader.php</td>
        </tr>
        <tr class="row-1">
            <td></td>
            <td>
                <b>Line: </b>154                <b>Level: </b>Not Set                <b>Time: </b>1733431581            </td>
        </tr>
        <tr class="row-3">
            <td class="col1 top">BackTrace Log:</td>
            <td class="col2">
                <div class="container-track">/var/www/html/lh-2.dock/Asset/Framework/Core/Mailer.php 99 calling Method: __call('getMailDkimSign',Array)<br>/var/www/html/lh-2.dock/Asset/Framework/Core/Mailer.php 67 calling Method: configure()<br>/var/www/html/lh-2.dock/Asset/Framework/Trait/SingletonTrait.php 46 calling Method: __construct()<br>/var/www/html/lh-2.dock/Asset/Framework/Core/Kernel.php 49 calling Method: getInstance()<br>/var/www/html/lh-2.dock/public/index.php 35 calling Method: lh()</div>
            </td>
        </tr>
        <tr class="row-3">
            <td class="col1 top">Related Code View</td>
            <td class="col2 container-code"><pre><code style="color: #000000"><span style="color: #0000BB">&lt;?php

</span><span style="color: #007700">declare(</span><span style="color: #0000BB">strict_types</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">);

</span><span style="color: #FF8000">/**
 * Last Hammer Framework 2.0
 * PHP Version 8.3 (Required).
 *
 * @see https://github.com/arcanisgk/LH-Framework
 *
 * @author    Walter Nu√±ez (arcanisgk/founder) &lt;icarosnet@gmail.com&gt;
 * @copyright 2017 - 2024
 * @license   http://www.gnu.org/copyleft/lesser.html GNU Lesser General Public License
 * @note      This program is distributed in the hope that it will be useful
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE.
 */

</span><span style="color: #007700">namespace </span><span style="color: #0000BB">Asset\Framework\Core</span><span style="color: #007700">;

use </span><span style="color: #0000BB">Asset\Framework\Trait\SingletonTrait</span><span style="color: #007700">;
use </span><span style="color: #0000BB">Exception</span><span style="color: #007700">;
use </span><span style="color: #0000BB">SplStack</span><span style="color: #007700">;

</span><span style="color: #FF8000">/**
 * Class that handles: Framework Configuration Usage
 *
 * @package Asset\Framework\Core\ConfigLoader;
 */
</span><span style="color: #007700">class </span><span style="color: #0000BB">ConfigLoader
</span><span style="color: #007700">{

    use </span><span style="color: #0000BB">SingletonTrait</span><span style="color: #007700">;

    </span><span style="color: #FF8000">/**
     * @var array
     */
    </span><span style="color: #007700">private array </span><span style="color: #0000BB">$configCache </span><span style="color: #007700">= [];

    </span><span style="color: #FF8000">/**
     * @return bool
     */
    </span><span style="color: #007700">public static function </span><span style="color: #0000BB">checkFullConfig</span><span style="color: #007700">(): </span><span style="color: #0000BB">bool
    </span><span style="color: #007700">{

        return </span><span style="color: #0000BB">CONFIG</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">project</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProjectConfig</span><span style="color: #007700">();
    }

    </span><span style="color: #FF8000">/**
     * @return void
     * @throws Exception
     */
    </span><span style="color: #007700">public function </span><span style="color: #0000BB">loadConfigurations</span><span style="color: #007700">(): </span><span style="color: #0000BB">void
    </span><span style="color: #007700">{
        if (!</span><span style="color: #0000BB">defined</span><span style="color: #007700">(</span><span style="color: #DD0000">'CONFIG'</span><span style="color: #007700">)) {
            </span><span style="color: #0000BB">$configs      </span><span style="color: #007700">= </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadAndValidateConfigs</span><span style="color: #007700">();
            </span><span style="color: #0000BB">$configObject </span><span style="color: #007700">= </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createConfigObject</span><span style="color: #007700">(</span><span style="color: #0000BB">$configs</span><span style="color: #007700">);
            </span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">'CONFIG'</span><span style="color: #007700">, </span><span style="color: #0000BB">$configObject</span><span style="color: #007700">);
        }
    }

    </span><span style="color: #FF8000">/**
     * @return array
     * @throws Exception
     */
    </span><span style="color: #007700">private function </span><span style="color: #0000BB">loadAndValidateConfigs</span><span style="color: #007700">(): array
    {
        </span><span style="color: #0000BB">$configs   </span><span style="color: #007700">= [];
        </span><span style="color: #0000BB">$jsonFiles </span><span style="color: #007700">= </span><span style="color: #0000BB">glob</span><span style="color: #007700">(</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #0000BB">DS</span><span style="color: #007700">, [</span><span style="color: #0000BB">PD</span><span style="color: #007700">, </span><span style="color: #DD0000">'Asset'</span><span style="color: #007700">, </span><span style="color: #DD0000">'resource'</span><span style="color: #007700">, </span><span style="color: #DD0000">'config'</span><span style="color: #007700">, </span><span style="color: #DD0000">'*.json'</span><span style="color: #007700">]));

        foreach (</span><span style="color: #0000BB">$jsonFiles </span><span style="color: #007700">as </span><span style="color: #0000BB">$file</span><span style="color: #007700">) {
            </span><span style="color: #0000BB">$jsonContent </span><span style="color: #007700">= </span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">);
            if (</span><span style="color: #0000BB">$jsonContent </span><span style="color: #007700">=== </span><span style="color: #0000BB">false</span><span style="color: #007700">) {
                continue;
            }

            </span><span style="color: #0000BB">$configData        </span><span style="color: #007700">= </span><span style="color: #0000BB">json_decode</span><span style="color: #007700">(</span><span style="color: #0000BB">$jsonContent</span><span style="color: #007700">, </span><span style="color: #0000BB">true</span><span style="color: #007700">);
            </span><span style="color: #0000BB">$section           </span><span style="color: #007700">= </span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">, </span><span style="color: #DD0000">'.json'</span><span style="color: #007700">));
            </span><span style="color: #0000BB">$configs</span><span style="color: #007700">[</span><span style="color: #0000BB">$section</span><span style="color: #007700">] = </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">convertKeysToCamelCase</span><span style="color: #007700">(</span><span style="color: #0000BB">$configData</span><span style="color: #007700">);
        }

        return </span><span style="color: #0000BB">$configs</span><span style="color: #007700">;
    }

    </span><span style="color: #FF8000">/**
     * @param array $array
     * @return array
     */
    </span><span style="color: #007700">private function </span><span style="color: #0000BB">convertKeysToCamelCase</span><span style="color: #007700">(array </span><span style="color: #0000BB">$array</span><span style="color: #007700">): array
    {
        </span><span style="color: #0000BB">$result </span><span style="color: #007700">= [];
        foreach (</span><span style="color: #0000BB">$array </span><span style="color: #007700">as </span><span style="color: #0000BB">$key </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$value</span><span style="color: #007700">) {
            </span><span style="color: #0000BB">$camelKey          </span><span style="color: #007700">= </span><span style="color: #0000BB">lcfirst</span><span style="color: #007700">(
                </span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(
                    </span><span style="color: #DD0000">' '</span><span style="color: #007700">,
                    </span><span style="color: #DD0000">''</span><span style="color: #007700">,
                    </span><span style="color: #0000BB">ucwords</span><span style="color: #007700">(
                        </span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(
                            </span><span style="color: #DD0000">'_'</span><span style="color: #007700">,
                            </span><span style="color: #DD0000">' '</span><span style="color: #007700">,
                            </span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'-'</span><span style="color: #007700">, </span><span style="color: #DD0000">' '</span><span style="color: #007700">, </span><span style="color: #0000BB">$key</span><span style="color: #007700">)
                        )
                    )
                )
            );
            </span><span style="color: #0000BB">$result</span><span style="color: #007700">[</span><span style="color: #0000BB">$camelKey</span><span style="color: #007700">] = </span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">) ? </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">convertKeysToCamelCase</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">) : </span><span style="color: #0000BB">$value</span><span style="color: #007700">;
        }

        return </span><span style="color: #0000BB">$result</span><span style="color: #007700">;
    }


    </span><span style="color: #FF8000">/**
     * @param array $data
     * @return object
     */
    </span><span style="color: #007700">private function </span><span style="color: #0000BB">createConfigObject</span><span style="color: #007700">(array </span><span style="color: #0000BB">$data</span><span style="color: #007700">): </span><span style="color: #0000BB">object
    </span><span style="color: #007700">{

        return new class(</span><span style="color: #0000BB">$data</span><span style="color: #007700">) {

            private array </span><span style="color: #0000BB">$properties</span><span style="color: #007700">;

            public function </span><span style="color: #0000BB">__construct</span><span style="color: #007700">(array </span><span style="color: #0000BB">$data</span><span style="color: #007700">)
            {
                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">properties </span><span style="color: #007700">= </span><span style="color: #0000BB">array_map</span><span style="color: #007700">(
                    fn(</span><span style="color: #0000BB">$value</span><span style="color: #007700">) =&gt; </span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">) ? new </span><span style="color: #0000BB">self</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">) : </span><span style="color: #0000BB">$value</span><span style="color: #007700">,
                    </span><span style="color: #0000BB">$data
                </span><span style="color: #007700">);
            }

            public function </span><span style="color: #0000BB">__get</span><span style="color: #007700">(</span><span style="color: #0000BB">string $name</span><span style="color: #007700">)
            {
                if (isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">properties</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]) &amp;&amp; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">properties</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">] instanceof </span><span style="color: #0000BB">self</span><span style="color: #007700">) {
                    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">properties</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">];
                }

                throw new </span><span style="color: #0000BB">Exception</span><span style="color: #007700">(
                    </span><span style="color: #DD0000">"Direct property access to '</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">' is not allowed. Use getter methods instead (e.g. get"</span><span style="color: #007700">.</span><span style="color: #0000BB">ucfirst</span><span style="color: #007700">(
                        </span><span style="color: #0000BB">$name
                    </span><span style="color: #007700">).</span><span style="color: #DD0000">"())"
                </span><span style="color: #007700">);
            }

            public function </span><span style="color: #0000BB">__call</span><span style="color: #007700">(</span><span style="color: #0000BB">string $name</span><span style="color: #007700">, array </span><span style="color: #0000BB">$arguments</span><span style="color: #007700">): </span><span style="color: #0000BB">mixed
            </span><span style="color: #007700">{
                if (!</span><span style="color: #0000BB">str_starts_with</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">, </span><span style="color: #DD0000">'get'</span><span style="color: #007700">)) {
                    throw new </span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">"Only getter methods are allowed. Method '</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">' not found."</span><span style="color: #007700">);
                }
                </span><span style="color: #0000BB">$property </span><span style="color: #007700">= </span><span style="color: #0000BB">lcfirst</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">, </span><span style="color: #0000BB">3</span><span style="color: #007700">));
                if (isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">properties</span><span style="color: #007700">[</span><span style="color: #0000BB">$property</span><span style="color: #007700">])) {
                    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">properties</span><span style="color: #007700">[</span><span style="color: #0000BB">$property</span><span style="color: #007700">];
                }
                throw new </span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">"Getter method '</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">' does not exist."</span><span style="color: #007700">);    </span><span style="color: #FF8000">// error detected in this line!!!
            </span><span style="color: #007700">}

            public function </span><span style="color: #0000BB">__debugInfo</span><span style="color: #007700">()
            {
                return [</span><span style="color: #DD0000">'debug' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'### Only For Implementation Purposes ###'</span><span style="color: #007700">, </span><span style="color: #DD0000">'Usage' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">buildDebugInfo</span><span style="color: #007700">()];
            }

            private function </span><span style="color: #0000BB">buildDebugInfo</span><span style="color: #007700">(</span><span style="color: #0000BB">mixed </span><span style="color: #007700">&amp;</span><span style="color: #0000BB">$debugInfo </span><span style="color: #007700">= </span><span style="color: #0000BB">null</span><span style="color: #007700">, </span><span style="color: #0000BB">string $parentPath </span><span style="color: #007700">= </span><span style="color: #0000BB">null</span><span style="color: #007700">): </span><span style="color: #0000BB">mixed
            </span><span style="color: #007700">{

                foreach (</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">properties </span><span style="color: #007700">as </span><span style="color: #0000BB">$key </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$value</span><span style="color: #007700">) {

                    if (</span><span style="color: #0000BB">$value </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">self</span><span style="color: #007700">) {
                        </span><span style="color: #0000BB">$currentPath     </span><span style="color: #007700">= </span><span style="color: #0000BB">$parentPath </span><span style="color: #007700">? </span><span style="color: #0000BB">$parentPath</span><span style="color: #007700">.</span><span style="color: #DD0000">'-&gt;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$key </span><span style="color: #007700">: </span><span style="color: #DD0000">'CONFIG-&gt;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$key</span><span style="color: #007700">;
                        </span><span style="color: #0000BB">$debugInfo</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">] = [];
                        </span><span style="color: #0000BB">$value</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">buildDebugInfo</span><span style="color: #007700">(</span><span style="color: #0000BB">$debugInfo</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">], </span><span style="color: #0000BB">$currentPath</span><span style="color: #007700">);
                    } else {
                        </span><span style="color: #0000BB">$path            </span><span style="color: #007700">= </span><span style="color: #0000BB">$parentPath </span><span style="color: #007700">?? </span><span style="color: #DD0000">'CONFIG'</span><span style="color: #007700">;
                        </span><span style="color: #0000BB">$debugInfo</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">] = [
                            </span><span style="color: #DD0000">'type'     </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'[getter]'</span><span style="color: #007700">,
                            </span><span style="color: #DD0000">'value'    </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$value</span><span style="color: #007700">,
                            </span><span style="color: #DD0000">'property' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$key</span><span style="color: #007700">,
                            </span><span style="color: #DD0000">'path'     </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$path</span><span style="color: #007700">.</span><span style="color: #DD0000">'-&gt;get'</span><span style="color: #007700">.</span><span style="color: #0000BB">ucfirst</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">).</span><span style="color: #DD0000">'()'</span><span style="color: #007700">,
                        ];
                    }
                }

                return </span><span style="color: #0000BB">$debugInfo</span><span style="color: #007700">;
            }

        };
    }
}</span></code></pre></td>
        </tr>
        <tr>
            <th colspan="2" class="footer">Please try to <a href="#" id="return">Go Back</a></th>
        </tr>
    </table>
</div>

<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
        function refresh() {
            document.location.href = "/";
        }

        document.getElementById("return").addEventListener("click", function () {
            refresh();
        });
    });
</script>
</body>

</html>